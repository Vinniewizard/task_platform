{% extends 'base.html' %}
{% block content %}
<div class="container my-5">
  <h2>Deposit Money</h2>
  <p>Please send your payment to the account number</strong></p>
  <p>Then select your payment method, enter the deposited amount, and provide your transaction reference (if available).</p>
  <form method="POST">
      {% csrf_token %}
      <div class="form-group">
          <label for="payment_method">Payment Method:</label>
          <select name="payment_method" id="payment_method" class="form-control" required>
             <option value="">-- Choose Payment Method --</option>
             <option value="binance">Binance</option>
             <option value="mpesa">Safaricom M-Pesa</option>
             <option value="airtel">Airtel Money</option>
          </select>
      </div>
      
      <!-- Instructions Area -->
      <div id="payment-instructions" class="alert alert-info" style="display:none;"></div>
      
      <div class="form-group">
          <label for="amount">Amount:</label>
          <input type="number" step="0.01" name="amount" id="amount" class="form-control" required>
      </div>
      <div class="form-group">
          <label for="reference">Transaction Reference (A must,Kindly make a deposit and come back here initialize for admin):</label>
          <input type="String" name="reference" id="reference" class="form-control"  required>
      </div>
      <button type="submit" class="btn btn-success">Submit Deposit Request</button>
  </form>
</div>

<script>
  // Listen for changes on the payment method select element
  document.getElementById('payment_method').addEventListener('change', function() {
    var method = this.value;
    var instructionsDiv = document.getElementById('payment-instructions');
    
    if(method === 'mpesa'){
      instructionsDiv.style.display = 'block';
      instructionsDiv.innerHTML = '<strong>Safaricom M-Pesa Instructions:</strong><br>' +
        '1. Dial <em>*334#</em> on your phone.<br>' +
        '2. Select the option to send money.<br>' +
        '3. Enter the recipient number: <strong>0758315014</strong>.<br>' +
        '4. Input the amount and your transaction reference, then confirm the payment.';
    } else if(method === 'binance'){
      instructionsDiv.style.display = 'block';
      instructionsDiv.innerHTML = '<strong>Binance Deposit Instructions:</strong><br>' +
        '1. Log in to your Binance account.<br>' +
        '2. Navigate to the P2P Send section.<br>' +
        '3. Use the email: <strong>vincentkipkoech937@gmail.com</strong> as the account identifier.<br>' +
        '4. Follow the on-screen instructions to complete the deposit, including your transaction reference.';
    } else if(method === 'airtel'){
      instructionsDiv.style.display = 'block';
      instructionsDiv.innerHTML = '<strong>Airtel Money Instructions:</strong><br>' +
        '1. Open your Airtel Money app or dial the service code.<br>' +
        '2. Select the option to send money.<br>' +
        '3. Enter the recipient number: <strong>0732241933</strong>.<br>' +
        '4. Enter the amount and, if applicable, your transaction reference, then confirm the transaction.';
    } else {
      instructionsDiv.style.display = 'none';
      instructionsDiv.innerHTML = '';
    }
  });
</script>
{% endblock %}
